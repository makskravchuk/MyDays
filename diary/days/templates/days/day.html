{% extends 'index.html' %}
{% load static %}
{% load day_filters %}
{% block title %}{{ day.date }} | {{ day.user.username }}{% endblock %}
{% block links %}
    <link rel="stylesheet" href="{% static 'styles/day.css' %}">
    <script src="https://cdn.maptiler.com/maptiler-sdk-js/v1.2.0/maptiler-sdk.umd.min.js"></script>
    <link href="https://cdn.maptiler.com/maptiler-sdk-js/v1.2.0/maptiler-sdk.css" rel="stylesheet"/>
    <script src="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.0/maptilersdk.umd.js"></script>
    <link href="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.0/style.css" rel="stylesheet">
    {% if edit_mode %}
        <link rel="stylesheet" href="{% static 'styles/edit_day.css' %}">
    {% endif %}
{% endblock %}
{% block content %}
    <div id="day">
        <div id="day-content">
            {% if day.title or day.image_title or edit_mode %}
                <div id="day-title" class="day-content-block">
                    {% if day.title or edit_mode %}
                        <div id="day-text-title" class="content-block-style">
                            {% if edit_mode %}
                                <input id="day-text-title-input" type="text" value="{{ day.title|default:'' }}"
                                       placeholder="–í–≤–µ–¥—ñ—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–Ω—è">
                            {% else %}
                                {{ day.title }}
                            {% endif %}
                        </div>
                    {% endif %}
                    {% if day.image_title or edit_mode %}
                        <div id="day-photo-title-container">
                            <img id="day-photo-title" alt="–§–æ—Ç–æ–∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–Ω—è" src="{% if day.image_title %}{{ day.image_title.url }}
                            {% else %}{% static 'images/no-day-photo-title.png' %}{% endif %}">
                            {% if edit_mode %}
                                <input class="choose-photo-title file-chooser-hidden" type="file" accept="image/*">
                                <div class="change-photo-title-button btn">
                                    <i class="material-icons-outlined">image</i>
                                    <span>–ó–º—ñ–Ω–∏—Ç–∏ —Ñ–æ—Ç–æ–∑–∞–≥–æ–ª–æ–≤–æ–∫</span>
                                </div>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>
            {% endif %}
            {% if day.text_description or edit_mode %}
                <div id="day-text-description" class="content-block-style day-content-block">
                    <div class="day-block-title">–û–ø–∏—Å –¥–Ω—è</div>
                    {% if edit_mode %}
                            <textarea
                                    id="day-text-description-textarea"
                                    placeholder="–†–æ–∑–∫–∞–∂—ñ—Ç—å –ø—Ä–æ –≤–∞—à –¥–µ–Ω—å"
                            >{{ day.text_description|default:'' }}</textarea>
                    {% else %}
                        {{ day.text_description }}
                    {% endif %}
                </div>
            {% endif %}
            {% if day.mood or edit_mode %}
                <div id="day-mood" class="content-block-style day-content-block">
                    <div class="day-block-title">–ù–∞—Å—Ç—Ä—ñ–π</div>
                    <div class="mood-container">
                        {% if day.mood.morning_mood or edit_mode %}
                                <div id="morning-mood" class="mood-block" title="{{ day.mood.get_morning_mood_display }}">
                                    <span>–†–∞–Ω–æ–∫:</span>
                                    {% if edit_mode %}
                                        <span class="morning-mood-select mood-select custom-select">
                                            <button class="select-button morning-mood-select-button" type="button">
                                            <span class="selected-value morning-mood-selected-value">
                                                {% if day.mood.noon_mood %}
                                                {{ day.mood.morning_mood_emoji }} {{ day.mood.get_morning_mood_display }}
                                                {% endif %}
                                            </span>
                                            <span class="select-arrow"></span>
                                            </button>
                                            <ul class="select-dropdown morning-mood-select-dropdown" role="listbox"></ul>
                                        </span>
                                    {% else %}
                                        <span class="mood-emoji">{{ day.mood.morning_mood_emoji }}</span>
                                    {% endif %}
                                </div>
                        {% endif %}
                        {% if day.mood.noon_mood or edit_mode %}
                            <div id="noon-mood" class="mood-block" title="{{ day.mood.get_noon_mood_display }}">
                                <span>–î–µ–Ω—å:</span>
                                {% if edit_mode %}
                                        <span class="noon-mood-select mood-select custom-select">
                                            <button class="select-button noon-mood-select-button" type="button">
                                            <span class="selected-value noon-mood-selected-value">
                                                {% if day.mood.noon_mood %}
                                            {{ day.mood.noon_mood_emoji }} {{ day.mood.get_noon_mood_display }}
                                            {% endif %}

                                            </span>
                                            <span class="select-arrow"></span>
                                            </button>
                                            <ul class="select-dropdown noon-mood-select-dropdown" role="listbox"></ul>
                                        </span>
                                    {% else %}
                                        <span class="mood-emoji">{{ day.mood.noon_mood_emoji }}</span>
                                    {% endif %}
                            </div>
                        {% endif %}
                        {% if day.mood.evening_mood or edit_mode %}
                            <div id="evening-mood" class="mood-block" title="{{ day.mood.get_evening_mood_display }}">
                                <span>–í–µ—á—ñ—Ä:</span>
                                {% if edit_mode %}
                                    <span class="evening-mood-select mood-select custom-select">
                                        <button class="select-button evening-mood-select-button" type="button">
                                        <span class="selected-value evening-mood-selected-value">
                                        {% if day.mood.evening_mood %}
                                            {{ day.mood.evening_mood_emoji }}{{ day.mood.get_evening_mood_display }}
                                            {% endif %}
                                        </span>
                                        <span class="select-arrow"></span>
                                        </button>
                                        <ul class="select-dropdown evening-mood-select-dropdown" role="listbox"></ul>
                                    </span>
                                {% else %}
                                    <span class="mood-emoji">{{ day.mood.evening_mood_emoji }}</span>
                                {% endif %}
                            </div>
                        {% endif %}
                        {% if day.mood.night_mood or edit_mode %}
                            <div id="night-mood" class="mood-block" title="{{ day.mood.get_night_mood_display }}">
                                <span>–ù—ñ—á:</span>
                                {% if edit_mode %}
                                    <span class="night-mood-select mood-select custom-select">
                                        <button class="select-button night-mood-select-button" type="button">
                                        <span class="selected-value night-mood-selected-value">
                                            {% if day.mood.night_mood %}
                                            {{ day.mood.night_mood_emoji }}{{ day.mood.get_night_mood_display }}
                                            {% endif %}
                                        </span>
                                        <span class="select-arrow"></span>
                                        </button>
                                        <ul class="select-dropdown night-mood-select-dropdown" role="listbox"></ul>
                                    </span>
                                {% else %}
                                    <span class="mood-emoji">{{ day.mood.night_mood_emoji }}</span>
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
            {% if day.feeling or edit_mode %}
                <div id="day-health" class="content-block-style day-content-block">
                    <div class="day-block-title">–°–∞–º–æ–ø–æ—á—É—Ç—Ç—è</div>
                    <div class="day-health-container">
                        {% if edit_mode %}
                            <span class="feeling-select custom-select">
                                <button class="select-button feeling-select-button" type="button">
                                    <span class="selected-value feeling-selected-value ">
                                        {% if day.feeling %}{{ day.get_feeling_display|capfirst }}
                                        {% else %}–í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à–µ —Å–∞–º–æ–ø–æ—á—É—Ç—Ç—è{% endif %}
                                    </span>
                                    <span class="select-arrow"></span>
                                </button>
                            <ul class="select-dropdown feeling-select-dropdown" role="listbox"></ul>
                            </span>
                        {% else %}
                            <div id="day-health-value"
                                 data-feeling="{{ day.feeling }}">{{ day.get_feeling_display|capfirst }}</div>
                        {% endif %}
                        <div id="day-health-description">{{ day.feeling_description }}</div>
                    </div>
                </div>
            {% endif %}
            {% if day.tasks.exists or edit_mode %}
                <div id="day-todo-list" class="content-block-style day-content-block">
                    <div class="day-block-title">–°–ø–∏—Å–æ–∫ —Å–ø—Ä–∞–≤</div>
                    <div class="day-todo-container">
                        <ol class="todo-list">
                            {% for task in day.tasks.all %}
                                <li class="todo" data-task-id="{{ task.id }}">
                                    <div class="execution-time">{{ task.execution_time }}</div>
                                    <div class="task">
                                        <div class="task-status" data-status="{{ task.status }}"></div>
                                        <div class="task-description">{{ task.description }}</div>
                                        {% if edit_mode %}
                                            <div class="delete-task-button item-text-button delete-btn">
                                            <i class="material-icons-outlined">delete</i>
                                        </div>
                                        {% endif %}
                                    </div>
                                </li>
                            {% endfor %}
                            {% if edit_mode %}
                                <li class="todo todo-template">
                                    <input type="time" class="execution-time execution-time-chooser" required />
                                    <div class="task">
                                        <div class="task-status" data-status="{{ task.status }}"></div>
                                        <input  type="text" class="task-description task-description-input" placeholder="–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –∑–∞–≤–¥–∞–Ω–Ω—è" required />
                                        <div class="add-task-button item-text-button add-btn">
                                            <i class="material-icons-outlined">add</i>
                                        </div>
                                    </div>
                                </li>
                            {% endif %}
                        </ol>
                    </div>
                </div>
            {% endif %}
            {% if day.images.exists or edit_mode %}
                <div id="day-photos" class="content-block-style day-content-block">
                    <div class="day-block-title">–§–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—ó</div>
                    <div class="gallery scroll photo-gallery">
                        {% for image in day.images.all %}
                            <div class="gallery-item-container day-photo-container"
                                 data-img-index="{{ image.id }}"
                                 data-caption="{% if image.description %}{{ image.description }} {% endif %}">
                                <img class="gallery-item" src="{{ image.file.url }}" alt="photo">
                            </div>
                        {% endfor %}
                    </div>
                     {% if edit_mode %}
                            <div class="add-item-block">
                                <textarea class="photo-description-textarea item-description-textarea" maxlength="400" placeholder="–û–ø–∏—Å –¥–æ —Ñ–æ—Ç–æ (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)"></textarea>
                                <input class="choose-photo file-chooser-hidden" type="file" accept="image/*">
                                <button id="add-photo-button" class="add-item-button">
                                    <i class="material-icons-outlined">add</i><span>–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ</span>
                                </button>
                            </div>
                     {% endif %}
                </div>
            {% endif %}
            {% if day.videos.exists or edit_mode %}
                <div id="day-videos" class="content-block-style day-content-block">
                    <div class="day-block-title">–í—ñ–¥–µ–æ–∑–∞–ø–∏—Å–∏</div>
                    <div class="gallery scroll video-gallery">
                        {% for video in day.videos.all %}
                            <div class="gallery-item-container day-video-container"
                                 data-video-index="{{ video.id }}"
                                 data-caption="{% if video.description %}{{ video.description }} {% endif %}">
                                <video class="gallery-video" src="{{ video.file.url }}"></video>
                            </div>
                        {% endfor %}
                    </div>
                    {% if edit_mode %}
                         <div class="add-item-block">
                            <textarea class="video-description-textarea item-description-textarea" maxlength="400" placeholder="–û–ø–∏—Å –¥–æ –≤—ñ–¥–µ–æ (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)"></textarea>
                            <input class="choose-video file-chooser-hidden" type="file" accept="video/*">
                            <button id="add-video-button" class="add-item-button">
                                <i class="material-icons-outlined">add</i><span>–î–æ–¥–∞—Ç–∏ –≤—ñ–¥–µ–æ</span>
                            </button>
                         </div>
                     {% endif %}
                </div>
            {% endif %}
            {% if day.audio.exists or edit_mode %}
                <div id="day-voice-records" class="content-block-style day-content-block">
                    <div class="day-block-title">–ì–æ–ª–æ—Å–æ–≤—ñ –∑–∞–ø–∏—Å–∏</div>
                    <div class="gallery scroll audio-gallery">
                        {% for audio in day.audio.all %}
                            <div class="gallery-item-container day-audio-container"
                                 data-caption="–†–∞–Ω–æ–∫ –ø–æ—á–∞–≤—Å—è –∑ –≤–µ—Å–Ω—è–Ω–æ–≥–æ —Å–æ–Ω—Ü—è"
                                 data-audio-index="{{ audio.id }}">
                                <audio class="gallery-item gallery-audio" controls
                                       src="{{ audio.file.url }}"></audio>
                                {% if audio.description %}
                                    <div class="scroll audio-caption">
                                        {{ audio.description }}</div>{% endif %}
                            </div>
                        {% endfor %}
                    </div>
                     {% if edit_mode %}
                         <div class="add-item-block">
                            <textarea class="audio-description-textarea item-description-textarea" maxlength="400" placeholder="–û–ø–∏—Å –¥–æ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)"></textarea>
                            <input class="choose-audio file-chooser-hidden" type="file" accept="audio/*">
                            <button id="add-audio-button" class="add-item-button">
                                <i class="material-icons-outlined">add</i><span>–î–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Å</span>
                            </button>
                         </div>
                     {% endif %}
                </div>
            {% endif %}
            {% if day.visited_places.exists or edit_mode %}
                <div id="day-visited-places" class="content-block-style day-content-block">
                    <div class="day-block-title">–í—ñ–¥–≤—ñ–¥–∞–Ω—ñ –º—ñ—Å—Ü—è</div>
                    <div id="map"></div>
                    <div class="visited-places-list">
                        {% for visited_place in day.visited_places.all %}
                            <div class="visited-place"
                                 data-id="{{ visited_place.id }}"
                                 data-longitude="{{ visited_place.longitude }}"
                                 data-latitude="{{ visited_place.latitude }}"
                                 data-title="{{ visited_place.title }}">
                                <i class="material-icons-outlined">location_on</i>
                                <span class="visited-place-name">{{ visited_place.title }}</span>
                                {% if edit_mode %}
                                <span class="delete-place-button item-text-button delete-btn">
                                    <i class="material-icons-outlined">delete</i>
                                </span>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            {% if day.musical_compositions.exists or edit_mode %}
                <div id="day-songs" class="content-block-style day-content-block">
                    <div class="day-block-title">–ú—É–∑–∏—á–Ω—ñ –∫–æ–º–ø–æ–∑–∏—Ü—ñ—ó</div>
                    <ol class="day-songs-list day-content-list">
                        {% for musical_composition in day.musical_compositions.all %}
                            <li class="day-songs-list-elem day-content-list-elem" data-composition-id="{{ musical_composition.id }}">
                                <span class="elem-content">
                                    <span class="elem-number">{{ forloop.counter }}</span>
                                    <span class="elem-text">{{ musical_composition.author }} - {{ musical_composition.name }}</span>
                                </span>
                                {% if edit_mode %}
                                    <span class="delete-composition-button item-text-button delete-btn">
                                        <i class="material-icons-outlined">delete</i>
                                    </span>
                                {% endif %}
                                <i class="material-icons-outlined">music_note</i>
                            </li>
                        {% endfor %}
                    </ol>
                    {% if edit_mode %}
                            <div class="add-item-block">
                                <input type="text" class="composition-author-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –∞–≤—Ç–æ—Ä–∞" required/>
                                <input type="text" class="composition-title-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –º—É–∑–∏—á–Ω–æ—ó –∫–æ–º–ø–æ–∑–∏—Ü—ñ—ó" required/>
                                <button id="add-composition-button" class="add-item-button">
                                    <i class="material-icons-outlined">add</i><span>–î–æ–¥–∞—Ç–∏ –∫–æ–º–ø–æ–∑–∏—Ü—ñ—é</span>
                                </button>
                            </div>
                     {% endif %}
                </div>
            {% endif %}
            {% if day.weather or edit_mode %}
                <div id="day-weather" class="content-block-style day-content-block">
                    <div class="day-block-title">–ü–æ–≥–æ–¥–∞</div>
                    <div class="weather">
                        <div class="temperature">
                            <div class="min-temperature">–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:<span
                                    class="temperature-value">
                                {% if day.weather.min_temperature %}
                                    {{ day.weather.min_temperature }}¬∞C
                                {% else %}
                                    ---
                                {% endif %}
                            </span>
                            </div>
                            <div class="max-temperature">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:<span
                                    class="temperature-value">
                                {% if day.weather.max_temperature %}
                                    {{ day.weather.max_temperature }}¬∞C
                                {% else %}
                                    ---
                                {% endif %}
                            </span>
                            </div>
                        </div>
                        <div class="weather-condition">
                            <img class="condition-img" src=
                                    "{% if day.weather.icon_url %}{{ day.weather.icon_url }}{% else %}{% static 'images/no-weather-icon.png' %}{% endif %}" alt="weather icon">
                            <span class="condition-description">
                                {{ day.weather.description }}
                            </span>
                        </div>
                    </div>
                    {% if edit_mode %}
                        <div class="add-item-block">
                            <input type="text" class="weather-city-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –º—ñ—Å—Ç–æ (–ª–∞—Ç–∏–Ω–∏—Ü–µ—é)" required/>
                            <button id="get-weather-button" class="add-item-button">
                                <i class="material-icons-outlined">thermostat</i><span>–û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ–≥–æ–¥—É</span>
                            </button>
                        </div>
                     {% endif %}
                </div>
            {% endif %}
            {% if day.related_people.exists or edit_mode %}
                <div id="day-related-people" class="content-block-style day-content-block">
                    <div class="day-block-title">–ü–æ–≤'—è–∑–∞–Ω—ñ –ª—é–¥–∏</div>
                    <div class="related-people-container">
                        {% for related_person in day.related_people.all %}
                            <span class="related-person" data-person-id="{{ related_person.id }}">
                                <i class="material-icons-outlined">person_pin_circle</i>
                                <span>{{ related_person.name }}</span>
                                {% if edit_mode %}
                                <span class="delete-person-button item-text-button delete-btn">
                                    <i class="material-icons-outlined">delete</i>
                                </span>
                                {% endif %}
                            </span>
                        {% endfor %}
                    </div>
                    {% if edit_mode %}
                            <div class="add-item-block">
                                <input  type="text" class="related-person-input" placeholder="–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è –ª—é–¥–∏–Ω–∏" required/>
                                <button id="add-related-person-button" class="add-item-button">
                                    <i class="material-icons-outlined">add</i><span>–î–æ–¥–∞—Ç–∏ –ª—é–¥–∏–Ω—É</span>
                                </button>
                            </div>
                     {% endif %}
                </div>
            {% endif %}
            {% if day.achievements.exists or edit_mode %}
                <div id="day-achievements" class="content-block-style day-content-block">
                    <div class="day-block-title">–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è</div>
                    <ol class="day-achievements-list day-content-list">
                        {% for achievement in day.achievements.all %}
                            <li class="day-achievements-list-elem day-content-list-elem" data-achv-id="{{ achievement.id }}">
                            <span class="elem-content">
                                <span class="elem-number">{{ forloop.counter }}</span>
                                {% if edit_mode %}
                                    <textarea class="achievement-textarea">{{ achievement.text }}</textarea>
                                    <div class="delete-achievement-button item-text-button delete-btn">
                                        <i class="material-icons-outlined">delete</i>
                                    </div>
                                {% else %}
                                    <span class="elem-text">{{ achievement.text }}</span>
                                {% endif %}
                            </span>
                                <i class="material-icons-outlined">emoji_events</i>
                            </li>
                        {% endfor %}
                    </ol>
                    {% if edit_mode %}
                            <div class="add-item-block">
                                <textarea class="add-achievement-textarea" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –≤–∞—à–µ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è"></textarea>
                                <button id="add-achievement-button" class="add-item-button">
                                    <i class="material-icons-outlined">add</i><span>–î–æ–¥–∞—Ç–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è</span>
                                </button>
                            </div>
                     {% endif %}
                </div>
            {% endif %}
            {% if day.life_lessons.exists or edit_mode %}
                <div id="day-life-lessons" class="content-block-style day-content-block">
                    <div class="day-block-title">–ñ–∏—Ç—Ç—î–≤—ñ —É—Ä–æ–∫–∏</div>
                    <ol class="day-life-lessons-list day-content-list">
                        {% for life_lesson in day.life_lessons.all %}
                            <li class="day-life-lessons-list-elem day-content-list-elem" data-lesson-id="{{ life_lesson.id }}">
                                <span class="elem-content">
                                    <span class="elem-number">{{ forloop.counter }}</span>
                                    {% if edit_mode %}
                                        <textarea class="life-lesson-textarea">{{ life_lesson.text }}</textarea>
                                        <div class="delete-life-lesson-button item-text-button delete-btn">
                                            <i class="material-icons-outlined">delete</i>
                                        </div>
                                    {% else %}
                                        <span class="elem-text">{{ life_lesson.text }}</span>
                                    {% endif %}
                                </span>
                                <i class="material-icons-outlined">bookmark</i>
                            </li>
                        {% endfor %}
                    </ol>
                    {% if edit_mode %}
                        <div class="add-item-block">
                            <textarea class="add-life-lesson-textarea" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –≤–∞—à –∂–∏—Ç—Ç—î–≤–∏–π —É—Ä–æ–∫"></textarea>
                            <button id="add-life-lesson-button" class="add-item-button">
                                <i class="material-icons-outlined">add</i><span>–î–æ–¥–∞—Ç–∏ –∂–∏—Ç—Ç—î–≤–∏–π —É—Ä–æ–∫</span>
                            </button>
                        </div>
                    {% endif %}
                </div>
            {% endif %}
            {% if day.conclusion or edit_mode %}
                <div id="day-conclusions" class="content-block-style day-content-block">
                    <div class="day-block-title">–í–∏—Å–Ω–æ–≤–∫–∏</div>
                    <div class="day-conclusions-container">
                        <i class="material-icons-outlined">short_text</i>
                        {% if edit_mode %}
                            <textarea
                                    id="day-conclusions-textarea"
                                    placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –≤–∏—Å–Ω–æ–≤–∫–∏ –ø–æ –¥–Ω—é"
                            >{% if day.conclusion %}{{ day.conclusion }}{% else %}{% endif %}</textarea>
                        {% else %}
                            <div class="day-conclusions-text">{{ day.conclusion }}</div>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        </div>
        <div id="day-sidebar">
            <div id="day-navigation" class="content-block-style">
                {% if not edit_mode %}
                    <div id="day-owner">
                        <a class="user-badge prevent-a " href="{% url 'profile' day.user.username %}">
                            <img class="user-badge-photo" alt="üë§" src="{% if day.user.profile.main_photo %}
                            {{ day.user.profile.main_photo.url }}
                            {% else %}
                            {% static 'images/no-profile-photo.png' %}
                            {% endif %}">
                            <div class="user-badge-names">
                                <span class="user-badge-name">{{ day.user.first_name }} {{ day.user.last_name }}</span>
                            </div>
                        </a>
                    </div>
                {% endif %}
                <div id="day-date">{{ day.date| formate_date }}</div>
                <ul id="day-menu">
                    {% if day.title or day.image_title or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-title" class="prevent-a">
                                <span class="day-menu-item-name"><span
                                        class="day-menu-item-text">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–Ω—è</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.text_description or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-text-description" class="prevent-a">
                                <span class="day-menu-item-name"><span class="day-menu-item-text">–û–ø–∏—Å –¥–Ω—è</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.mood or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-mood" class="prevent-a">
                                <span class="day-menu-item-name"><span class="day-menu-item-text">–ù–∞—Å—Ç—Ä—ñ–π</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.feeling or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-health" class="prevent-a">
                                <span class="day-menu-item-name"><span
                                        class="day-menu-item-text">–°–∞–º–æ–ø–æ—á—É—Ç—Ç—è</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.tasks.exists or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-todo-list" class="prevent-a">
                                <span class="day-menu-item-name"><span
                                        class="day-menu-item-text">–°–ø–∏—Å–æ–∫ —Å–ø—Ä–∞–≤</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.images or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-photos" class="prevent-a">
                                <span class="day-menu-item-name"><span
                                        class="day-menu-item-text">–§–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—ó</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.videos or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-videos" class="prevent-a">
                                <span class="day-menu-item-name"><span
                                        class="day-menu-item-text">–í—ñ–¥–µ–æ–∑–∞–ø–∏—Å–∏</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.audio or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-voice-records" class="prevent-a">
                                <span class="day-menu-item-name"><span
                                        class="day-menu-item-text">–ì–æ–ª–æ—Å–æ–≤—ñ –∑–∞–ø–∏—Å–∏</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.visited_places.exists or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-visited-places" class="prevent-a">
                                <span class="day-menu-item-name"><span
                                        class="day-menu-item-text">–í—ñ–¥–≤—ñ–¥–∞–Ω—ñ –º—ñ—Å—Ü—è</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.musical_compositions.exists or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-songs" class="prevent-a">
                                <span class="day-menu-item-name"><span
                                        class="day-menu-item-text">–ú—É–∑–∏—á–Ω—ñ –∫–æ–º–ø–æ–∑–∏—Ü—ñ—ó</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.weather or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-weather" class="prevent-a">
                                <span class="day-menu-item-name"><span class="day-menu-item-text">–ü–æ–≥–æ–¥–∞</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.related_people.exists or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-related-people" class="prevent-a">
                            <span class="day-menu-item-name"><span
                                    class="day-menu-item-text">–ü–æ–≤'—è–∑–∞–Ω—ñ –ª—é–¥–∏</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.achievements.exists or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-achievements" class="prevent-a">
                                <span class="day-menu-item-name"><span
                                        class="day-menu-item-text">–î–æ—Å—è–≥–Ω–µ–Ω–Ω—è</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.life_lessons.exists or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-life-lessons" class="prevent-a">
                            <span class="day-menu-item-name"><span
                                    class="day-menu-item-text">–ñ–∏—Ç—Ç—î–≤—ñ —É—Ä–æ–∫–∏</span></span>
                            </a>
                        </li>
                    {% endif %}
                    {% if day.conclusion or edit_mode %}
                        <li class="day-menu-item">
                            <a href="#day-conclusions" class="prevent-a">
                                <span class="day-menu-item-name"><span class="day-menu-item-text">–í–∏—Å–Ω–æ–≤–∫–∏</span></span>
                            </a>
                        </li>
                    {% endif %}
                </ul>
                <div class="day-types-info">
                    <div class="day-type">
                        <span>–¢–∏–ø –¥–Ω—è:</span>
                        {% if edit_mode %}
                         <span class="day-type-select custom-select">
                                <button class="select-button day-type-select-button" type="button">
                                <span class="selected-value day-type-selected-value">{{ day.day_type_emoji }} {{ day.get_day_type_display }}</span>
                                <span class="select-arrow"></span>
                                </button>
                                <ul class="select-dropdown day-type-select-dropdown" role="listbox"></ul>
                            </span>
                        {% else %}
                        <span class="day-type-value" data-day-type="{{ day.day_type }}">
                            <span>{{ day.day_type_emoji }}</span>
                            <span>{{ day.get_day_type_display }}</span>
                        </span>
                        {% endif %}
                    </div>
                    <div class="day-access-mode">
                        <span>–î–æ—Å—Ç—É–ø:</span>
                        {% if edit_mode %}
                            <span class="access-mode-select custom-select">
                                <button class="select-button access-mode-select-button" type="button">
                                <span class="selected-value access-mode-selected-value">{{ day.get_access_mode_display }}</span>
                                <span class="select-arrow"></span>
                                </button>
                                <ul class="select-dropdown access-mode-select-dropdown" role="listbox"></ul>
                            </span>
                        {% else %}
                            <span class="access-mode-value" data-access-mode="{{ day.access_mode }}">
                                <span>{{ day.get_access_mode_display }}</span>
                            </span>
                        {% endif %}
                    </div>
                </div>
                {% if user == day.user %}
                    <div class="day-edit-button-container">
                        <a class="edit-day-button prevent-a" href="
                                {% if edit_mode %}{% url 'view_day' day.user.username day.date|date:"Y-m-d" %}
                                {% else %}{% url 'edit_day' day.user.username day.date|date:"Y-m-d" %}{% endif %}">
                                <i class="material-icons-outlined">edit</i>
                                <span class="edit-day-button-text">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –¥–µ–Ω—å</span>
                        </a>
                    </div>
                {% endif %}
                 {% if edit_mode %}
                     <div class="day-updated">
                     <span>–û–Ω–æ–≤–ª–µ–Ω–æ: </span>
                         <span class="day-updated-time">{{ day.updated|date:"d.m.Y, H:i" }}</span>
                    </div>
                 {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    <script>
        const userFullName = "{{ day.user.first_name }} {{ day.user.last_name }}";
        const editMode = {% if edit_mode %}true{% else %}false{% endif %};
        const date = "{{day.date|date:'Y-m-d'}}";
        const dateDisplay = "{{day.date|formate_date}}";
    </script>
    <script src="{% static 'js/days/gallery.js' %}"></script>
    {% if day.visited_places.exists or edit_mode %}
        <script src="{% static 'js/days/map.js' %}"></script>
    {% endif %}
    <script src="{% static 'js/days/day.js' %}"></script>
    {% if edit_mode %}
        <script>
            const accessModes = [{% for mode in day.access_modes_list %}"{{ mode }}",{% endfor %}];
            const dayTypes = [{% for day_type in day.day_types_list %}"{{ day_type }}",{% endfor %}];
            const moods = [{% for mood in moods_list %}"{{ mood }}",{% endfor %}];
            const feelings = [{% for feeling in day.feelings_list %}"{{ feeling }}",{% endfor %}];
            const csrftoken = getCookie('csrftoken');
        </script>
        <script src="{% static 'js/days/edit_day.js' %}"></script>
        <script src="{% static 'js/days/edit_type_access_mode.js' %}"></script>
        <script src="{% static 'js/days/edit_title.js' %}"></script>
        <script src="{% static 'js/days/edit_text_description.js' %}"></script>
        <script src="{% static 'js/days/edit_moods.js' %}"></script>
        <script src="{% static 'js/days/edit_feeling.js' %}"></script>
        <script src="{% static 'js/days/edit_media_content.js' %}"></script>
        <script src="{% static 'js/days/edit_tasks.js' %}"></script>
        <script src="{% static 'js/days/edit_weather.js' %}"></script>
        <script src="{% static 'js/days/edit_musical_compositions.js' %}"></script>
        <script src="{% static 'js/days/edit_related_people.js' %}"></script>
        <script src="{% static 'js/days/edit_achievements_life_lessons.js' %}"></script>
        <script src="{% static 'js/days/edit_conclusion.js' %}"></script>
    {% endif %}
{% endblock %}






